<!DOCTYPE html>
<html lang="en">
  <head>
    <title>JavaScript Playground of Event.isTrusted</title>
    <style>
     .trusted {
       background-color: green;
     }
     .not-trusted {
       background-color: red;
     }
     footer {
       position: absolute;
       right: 10px;
       bottom: 5px;
     }
    </style>
  </head>
  <body>
    <h1>JavaScript Playground of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/isTrusted">Event.isTrusted</a></h1>
    <input id="input" type="text">
    <button id="btn1">Event generated by user action</button>
    <button id="btn2">Event generated by script</button>
    <button id="btn3">Event generated via dispatchEvent</button>
    <button id="reset">reset</button>
    <script>
     function getBody() {
       return document.getElementsByTagName("body")[0];
     }

     function getInput() {
       return document.getElementById("input");
     }
     
     function isTrusted() {
       getInput().value = "trusted";
       getBody().setAttribute("class", "trusted");
     }

     function isNotTrusted() {
       getInput().value = "not trusted";
       getBody().setAttribute("class", "not-trusted");
     }

     function doReset() {
       getInput().value = "";
       getBody().removeAttribute("class");
     }

     // User action
     var btn1 = document.getElementById("btn1");
     btn1.addEventListener("click", function(ev) {
       if (ev.isTrusted) {
         isTrusted();
       } else {
         isNotTrusted();
       }
     });

     // By script
     var btn2 = document.getElementById("btn2");
     btn2.addEventListener("click", function(ev) {
       btn1.click();
     });

     // By dispatchEvent
     var btn3 = document.getElementById("btn3");
     btn3.addEventListener("click", function(ev) {
       var event = new MouseEvent("click");
       console.log(event);
       btn1.dispatchEvent(event);
     });

     // Reset
     var reset = document.getElementById("reset");
     reset.addEventListener("click", doReset);
     window.onload = doReset;
    </script>
    <footer>
      <a href="http://kyanny.github.io/playground/">http://kyanny.github.io/playground/</a>
    </footer>
  </body>
</html>
